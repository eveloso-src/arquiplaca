<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring3-3.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
<title>Home Page</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/home.css}" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
	
</script>

</head>

<body>
	<header th:replace="layouts/base::header(dark)"> </header>

	<div class="container">
		<form id="logout" th:action="@{/logout}" method="get">
			<div class="row">
				<div class="col-md-12 text-right">
					<button type="button" class="btn btn-primary" type="Submit">Logout</button>
					<!-- 			<button class="btn btn-md btn-danger btn-block" name="registration" -->
					<!-- 				type="Submit">Logout</button> -->
				</div>
			</div>
		</form>


		<!-- 				<div class="panel-group" style="margin-top: 40px">
		<div class="row">
			<div class="col-md-6">

					<div class="panel panel-primary">
						<div class="panel-heading">
							<span th:utext="'Nuevo Movimiento'"></span>
						</div>

						<div class="panel-body">

							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th>Fecha</th>
										<th>Codigo</th>
										<th>Color</th>
										<th>Descripci√≥n</th>
										<th>Cantidad</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><input type="text" name="fecha"></td>
										<td><input type="text" name="fecha"></td>
										<td><input type="text" name="fecha"></td>
										<td><input type="text" name="fecha"></td>
										<td><input type="text" name="fecha"></td>
									</tr>
								</tbody>
							</table>
							<div class="text-right">
								<button>Crear</button>
							</div>
						</div>

					</div>
				</div>
			</div>
 -->
		<div class="row">

			<div class="col-md-8">

				<div class="panel-group" style="margin-top: 40px">


					<div class="panel panel-primary">
						<div class="panel-heading">
							<span th:utext="Movimientos"> </span>
						</div>

						<div class="panel-body">
							<table id="tableMovs" class="table table-striped table-hover">
								<thead>
									<tr>
										<th>Fecha</th>
										<th>Codigo</th>
										<th>Nombre</th>
										<th>Color</th>
										<th>Cantidad</th>
										<th>M2</th>
									</tr>
								</thead>
								<tr class="alert alert-success">
									<td>09/09/2019</td>
									<td>123</td>
									<td>Mesa</td>
									<td>Wengue</td>
									<td>1</td>
									<td>6</td>
								</tr>
								<tr class="alert alert-danger">
									<td>09/09/2019</td>
									<td>223</td>
									<td>Silla</td>
									<td>Roble</td>
									<td>-2</td>
									<td>1</td>
								</tr>
								<tr class="alert alert-danger">
									<td>09/09/2019</td>
									<td>223</td>
									<td>Silla</td>
									<td>Roble</td>
									<td>-2</td>
									<td>1</td>
								</tr>
								<tr class="alert alert-success">
									<td>09/09/2019</td>
									<td>123</td>
									<td>Mesa</td>
									<td>Blanca</td>
									<td>1</td>
									<td>1</td>
								</tr>
								<tr class="alert alert-success">
									<td>09/09/2019</td>
									<td>988</td>
									<td>Botinero</td>
									<td>Wengue</td>
									<td>2</td>
									<td>1</td>
								</tr>
								<tr class="alert alert-success">
									<td>01/09/2019</td>
									<td>123</td>
									<td>Mesa</td>
									<td>Wengue</td>
									<td>1</td>
									<td>6</td>
								</tr>
								<tr class="alert alert-success">
									<td>01/09/2019</td>
									<td>123</td>
									<td>Mesa</td>
									<td>Wengue</td>
									<td>6</td>
									<td>1</td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel-group" style="margin-top: 40px">

					<div class="panel panel-primary">
						<div class="panel-heading">
							<span th:utext="'Nuevo Movimiento'"></span>
						</div>
						<div class="panel-body">

							<form id="form" th:action=" 
								@{/movement}" 
								th:object="${movement}"
								method="post">
								<div class="form-group">

									Fecha: <input type="date" class="form-control" id="date" name="date" th:field="*{date}"/>
								</div>

								<div class="form-group">
									Codigo: <input type="number" class="form-control" id="code" name="code" />
								</div>

								<div class="form-group">
									Color: <input type="text" class="form-control" name="color" id="color"/>
								</div>


								<div class="form-group">
									Cantidad: <input type="text" class="form-control" name="amount" required id="amount"/>
								</div>

								<div class="form-group">
									m2: <input type="text" class="form-control" name="m2" id="m2" required/>
								</div>

								<button type="button" class="btn btn-primary" id="newMov" >Crear</button>


								<!-- 								<div class="form-row"> -->
								<!-- 									<div class="col-md-4 mb-3"> -->
								<!-- 										<label for="validationCustom01">Fecha</label> <input -->
								<!-- 											type="date" class="form-control" name="dateInput" -->
								<!-- 											th:value="${todate}" /> -->
								<!-- 									</div> -->
								<!-- 								</div> -->
							</form>
						</div>

					</div>

					<!--  
							<div class="panel-heading">
								<span th:utext="Productos"></span>
							</div>
							<div class="panel-body">

								<table class="table table-striped table-hover">
									<thead>
										<tr>
											<th>Nombre</th>
											<th>Color</th>
											<th>Stock</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>Mesa</td>
											<td>Blanco</td>
											<td>12</td>
										</tr>
										<tr>
											<td>Negro</td>
											<td>Botinero</td>
											<td>1</td>
										</tr>
										<tr>
											<td>Silla</td>
											<td>Wengue</td>
											<td>2</td>
										</tr>
									</tbody>
								</table>

							</div>
					</div>
						-->
				</div>
			</div>
		</div>
	</div>
</body>
</html>

<script>
	$('#newMov').click(function() {
// 		console.log($("form").serialize());
		$.ajax({
			type : 'POST',
			url : $("#form").attr("action"),
			data : $("form").serialize(),
			success : function(response) {
// 				console.log("ok")
// 				var table = $('#tableMovs');
				var table = document.getElementById('tableMovs').getElementsByTagName('tbody')[0];
				var row = table.insertRow(0);
				var cell1 = row.insertCell(0);
				var cell2 = row.insertCell(1);
				var cell3 = row.insertCell(2);
				var cell4 = row.insertCell(3);
				var cell5 = row.insertCell(4);
				var cell6 = row.insertCell(5);
				var aux = document.getElementById('date').value;
				var fecha = aux.substring(8,10) + '/' + aux.substring(5,7)  + '/' +aux.substring(0,4); 
				console.log(fecha);
				cell1.innerHTML = fecha;
				cell2.innerHTML = document.getElementById('code').value;
				cell4.innerHTML = document.getElementById('color').value;
				cell5.innerHTML = document.getElementById('amount').value;
				cell6.innerHTML = document.getElementById('m2').value;
			},
			error : function(response) {
				console.log("error")
			}
		});
	});
</script>